echo "ğŸ” Ejecutando validaciones previas al commit..."

# ValidaciÃ³n de ESLint
echo "âš™ï¸ Verificando cÃ³digo con ESLint..."
npx next lint
if [ $? -ne 0 ]; then
  echo "âŒ ESLint encontrÃ³ problemas en el cÃ³digo."
  exit 1
fi
echo "âœ… ESLint no encontrÃ³ problemas."

# ValidaciÃ³n de Prettier
echo "âš™ï¸ Verificando formato con Prettier..."
npx prettier --check .
if [ $? -ne 0 ]; then
  echo "âŒ Prettier detectÃ³ problemas de formato en algunos archivos."
  echo "ğŸ’¡ SoluciÃ³n sugerida: Ejecuta el comando 'npm run format' para corregir automÃ¡ticamente los problemas."
  echo "Â¿Quieres ejecutar 'npm run format' ahora? (s/n)"
  
  # Leer entrada del usuario
  read -r respuesta
  if [ "$respuesta" = "s" ]; then
    echo "ğŸš€ Ejecutando 'npm run format'..."
    npm run format
    echo "âœ… Problemas corregidos automÃ¡ticamente. Por favor, realiza el commit nuevamente."
  else
    echo "âš ï¸ No se aplicaron correcciones. Por favor, corrige los problemas manualmente antes de realizar el commit."
    exit 1
  fi
fi

echo "âœ… El formato del cÃ³digo es correcto."
echo "ğŸ‰ Â¡Todos los chequeos pasaron! Procediendo con el commit..."
