echo "🔍 Ejecutando validaciones previas al commit..."

# Validación de ESLint
echo "⚙️ Verificando código con ESLint..."
npx next lint
if [ $? -ne 0 ]; then
  echo "❌ ESLint encontró problemas en el código."
  echo "💡 Por favor corrige los errores antes de intentar hacer un commit."
  exit 1
fi
echo "✅ ESLint no encontró problemas."

# Validación de Prettier
# echo "⚙️ Verificando formato con Prettier..."
# PRETTIER_OUTPUT=$(npx prettier --check . 2>&1)
# PRETTIER_EXIT_CODE=$?

# # Siempre muestra la salida completa para depuración
# echo "🛠️ Debug: Salida completa de Prettier:"
# echo "$PRETTIER_OUTPUT"

# if [ $PRETTIER_EXIT_CODE -ne 0 ]; then
#   echo "❌ Prettier detectó problemas de formato en algunos archivos."
#   echo "💡 Solución: Ejecuta el siguiente comando para corregirlos automáticamente:"
#   echo "   npx prettier --write ."
#   echo "🛠️ Archivos afectados:"

#   # Extrae las líneas con advertencias de la salida
#   echo "$PRETTIER_OUTPUT" | grep -E '\[warn\]' || echo "⚠️ No se encontraron advertencias específicas en la salida."

#   exit 1
# fi

echo "✅ El formato del código es correcto."




echo "🎉 ¡Todos los chequeos pasaron! Procediendo con el commit..."
